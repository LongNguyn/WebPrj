<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/stylepayments.css">
    <link rel="stylesheet" href="./font/themify-icons-font/themify-icons/themify-icons.css">
    <title>Thanh Toán</title>
</head>
<body>
    <div class="container">
        <div class="left">
            <p>Phương thức thanh toán</p>
            <hr style="border:1px solid #ccc; margin: 0 15px;">
            <div class="methods">
                <div onclick="doFun()" id="tColorA" style="color:greenyellow;">
                    <i class="fa-solid fa-credit-card" style="color:greenyellow"></i>
                    Thanh toán bằng thẻ
                </div>
                <div onclick="doFunA()" id="tColorB">
                    <i class="fa-solid fa-building-columns"></i>
                    Chuyển khoản ngân hàng
                </div>
                <div onclick="doFunB()" id="tColorC">
                    <i class="fa-solid fa-wallet"></i>
                    Apple/Google pay
                </div>
                <hr style="border: 1px solid #ccc; margin: 0 15px;">
            </div>
        </div>
        <div class="center">
                <a href="https://www.shift4shop.com/credit-card-logos.html">
                    <img alt="Credit Card Logos" title="Caredit Card Logos" src="https://www.shift4shop.com/images/credit-card-logos/cc-lg-4.png" width="250" height="auto">
                </a>
                <hr style="border: 1px solid #ccc; margin: 0 15px;">
                <div class="card-details">
                    <form>
                        <p>Mã số thẻ</p>
                        <div class="c-number" id="c-number">
                            <input id="number" class="cc-number" placeholder="Card number" maxlength="19" required>
                            <i class="fa-solid fa-credit-card" style="margin: 0;"></i>
                        </div>
                        <div class="c-details">
                            <div>
                                <p>Ngày hết hạn</p>
                                <input id="e-date" class="cc-exp" placeholder="MM/YY" required maxlength="5" required>
                            </div>
                            <div>
                                <p>Mã bảo mật</p>
                                <div class="cvv-box" id="cvv-box">
                                    <input id="cvv" class="cc-cvv" placeholder="CVV" required maxlength="3" required>
                                    <i class="fa-solid fa-circle-question" title="3 digits on the back of the card" style="cursor: pointer;"></i>
                                </div>
                            </div>
                        </div>
                        <div class="email">
                            <p>Email</p>
                            <input type="email" placeholder="example@email.com" id="email" required>
                        </div>
                        <button>Thanh Toán</button>
                    </form>
                </div>
        </div>

        <div class="right">
            <p>Thông tin đặt hàng</p>
            <hr style="border: 1px solid #ccc; margin: 0 15px;">
            <div class="details">
                <div style="font-weight: bold; padding: 3px 0;">Mô tả đơn hàng</div>
                <div style="padding: 3px 0;">Kiểm thử thanh toán</div>
            </div>
            <hr style="border: 1px solid #ccc; margin: 0 15px;">
            <a href="https://www.shift4shop.com/credit-card-logos.html">
                <img alt="Credit Card Logos" title="Caredit Card Logos" src="https://www.shift4shop.com/images/credit-card-logos/cc-lg-4.png" width="100%" height="auto">
            </a>
        </div>
        
    </div>
    <script>
        let tColorA = document.getElementById('tColorA'),
        tColorB = document.getElementById('tColorB'),
        tColorC = document.getElementById('tColorC'),
        iconA = document.querySelector('.fa-credit-card'),
        iconB = document.querySelector('.fa-building-columns'),
        iconC = document.querySelector('.fa-wallet'),
        cDetails = document.querySelector('.card-details');

        function doFun(){
            tColorA.style.color = "greenyellow";
            tColorB.style.color = "#444";
            tColorC.style.color = "#444";
            iconA.style.color = "greenyellow";
            iconB.style.color = "#aaa";
            iconC.style.color = "#aaa";
            cDetails.style.display = "block";
        }
        function doFunA(){
            tColorA.style.color = "#444";
            tColorB.style.color = "greenyellow";
            tColorC.style.color = "#444";
            iconA.style.color = "#aaa";
            iconB.style.color = "greenyellow";
            iconC.style.color = "#aaa";
            cDetails.style.display = "none";
        }
        function doFunB(){
            tColorA.style.color = "#444";
            tColorB.style.color = "#444";
            tColorC.style.color = "greenyellow";
            iconA.style.color = "#aaa";
            iconB.style.color = "aaa";
            iconC.style.color = "#greenyellow";
            cDetails.style.display = "none";
        }

        let cNumber = document.getElementById('number');
        cNumber.addEventListener('keyup', function(e){
            let num = cNumber.value;
            
            let newValue = '';
            num = num.replace(/\s/g, '');
            for(var i=0; i< num.length; i++){
                if(i%4==0 && i>0) newValue = newValue.concat(' ');
                newValue = newValue.concat(num[i]);
                cNumber.value = newValue;
            }

            let ccNum = document.getElementById('c-number');
            if(num.length < 16){
                ccNum.style.border="1px solid red";
            }else{
                ccNum.style.border="1px solid greenyellow";
            }
        });

        let eDate = document.getElementById('e-date');
        eDate.addEventListener('keyup', function( e ){

            let newInput = eDate.value;

            if(e.which !==8 ){
                var numChars = e.target.value.length;
                if(numChars == 2){
                    var thisVal = e.target.value;
                    thisVal += '/';
                    e.target.value = thisVal;
                    console.log(thisVal.length)
                }
            }

            if(newInput.length<5){
                eDate.style.border="1px solid red";
            }
            else{
                eDate.style.border="1px solid greenyellow";
            }
        });

        let cvv = document.getElementById('cvv');
        cvv.addEventListener('keyup', function(e){

            let elen = cvv.value;
            let cvvBox = document.getElementById('cvv-box');
            if(elen.length<3){
                cvvBox.style.border="1px solid red";
            }else{
                cvvBox.style.border="1px solid greenyellow";
            }
        });

                // Lấy tham chiếu đến nút thanh toán
        const paymentButton = document.querySelector('button');

        // Thêm sự kiện click cho nút thanh toán
        paymentButton.addEventListener('click', function(event) {
            event.preventDefault(); // Ngăn chặn hành động mặc định của nút submit

            // Kiểm tra xem tất cả các trường thông tin đã được điền đúng chưa
            const cardNumber = document.getElementById('number').value.replace(/\s/g, '');
            const expiryDate = document.getElementById('e-date').value;
            const cvv = document.getElementById('cvv').value;

            // Kiểm tra mỗi trường thông tin
            if (cardNumber.length !== 16) {
                alert('Vui lòng nhập đúng số thẻ.');
            } else if (expiryDate.length !== 5 || !/^\d{2}\/\d{2}$/.test(expiryDate)) {
                alert('Vui lòng nhập đúng ngày hết hạn (MM/YY).');
            } else if (cvv.length !== 3) {
                alert('Vui lòng nhập đúng mã bảo mật (CVV).');
            } else {
                // Nếu tất cả thông tin đều hợp lệ, hiển thị thông báo thanh toán thành công
                alert('Thanh toán thành công!');
                window.location.href = "index.html";
            }
        });

    </script>
</body>
</html>